package ru.egorbarinov.testtask;import java.util.*;public class UnluckyVassal {    public void printReportForKing(List<String> pollResults) throws CyclicSubmissionException {        var king = new Subject("король");        Map<String, Subject> allSubjects = new HashMap<>();        Set<Subject> kingSubjects = new HashSet<>();        for (String s : pollResults) {            String[] directSubjects = s.split(": ");            var owner = getSubject(directSubjects[0], allSubjects);            if (owner.getOwner() == null) {                owner.setOwner(king);                kingSubjects.add(owner);            }            if (directSubjects.length > 1) {                String[] subordinateSubject = directSubjects[1].split(", ");                for (String subject : subordinateSubject) {                    var subjectName = getSubject(subject, allSubjects);                    owner.addSubject(subjectName);                    subjectName.setOwner(owner);                    kingSubjects.remove(subjectName);                }            }        }        for (Subject subject : kingSubjects) {            king.addSubject(subject);        }        System.out.println(king.report(0));    }    private Subject getSubject(String name, Map<String, Subject> allSubjects) {        if (allSubjects.containsKey(name))            return allSubjects.get(name);        else {            var subject = new Subject(name);            allSubjects.put(name, subject);            return subject;        }    }}